<!DOCTYPE html>
<html dir="ltr">
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <title>Dev/Design/Offline files - XOWA</title>
  <link rel="shortcut icon" href="https://gnosygnu.github.io/xowa/xowa_logo.png" />
  <link rel="stylesheet" href="https://gnosygnu.github.io/xowa/xowa_common.css" type="text/css">
  
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject skin-vector action-submit vector-animateLayout" spellcheck="false">
<div id="mw-page-base" class="noprint"></div>
<div id="mw-head-base" class="noprint"></div>
<div id="content" class="mw-body">
  <h1 id="firstHeading" class="firstHeading"><span>Dev/Design/Offline files</span></h1>
  <div id="bodyContent" class="mw-body-content">
    <div id="siteSub">From XOWA: the free, open-source, offline wiki application</div>
    <div id="contentSub"></div>
    <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
    
    <table class="metadata plainlinks ambox ambox-delete" style="">
      <tr>
        <td class="mbox-empty-cell">
        </td>
        <td class="mbox-text" style="">
          <p>
            <span class="mbox-text-span">This process is currently in development. The documentation below is provided for reference only. You can run the commands, but please note that the end result will not have any immediate use.</span>
          </p>
        </td>
      </tr>
    </table>
    <p>
      Offline thumbnails will require a lot of time and disk storage. Estimates are provided below in the format of <code>[Space used; Time taken]</code>.
    </p>
    <p>
      Note that Simple Wikipedia will take 24+ hours and 120 GB for the first run.
    </p>
    <h2>
      <span class="mw-headline" id="Commons_process">Commons process</span>
    </h2>
    <p>
      Since most images reside in the commons wiki, commons must be set up. Note that this only needs to be done once for all wikis.
    </p>
    <ul>
      <li>
        <code>[ 50 GB; 03 h]</code> Import the Commons wiki with category level 2. See <a href="http://xowa.org/home/wiki/Dashboard/Import/Offline.html" id="xolnki_2" title="Dashboard/Import/Offline" class="xowa-visited">Dashboard/Import/Offline</a>
      </li>
      <li>
        <code>[ 50 GB; 02 h]</code> Download and unzip commonswiki-latest-image.sql.gz
      </li>
      <li>
        <code>[ 01 GB; 20 m]</code> Run the images command. This will generate a database called oimg_image which will have more data for each file (width, height)
      </li>
      <li>
        <code>[ 15 MB; 40 m]</code> Run the redirect command. This will generate a database called oimg_redirect which will list all redirect targets
      </li>
    </ul>
    <h2>
      <span class="mw-headline" id="Wiki_process">Wiki process</span>
    </h2>
    <p>
      These steps must be run for the given wiki. Estimated size / times are provided for Simple Wikipedia.
    </p>
    <ul>
      <li>
        <code>[ 01 MB; 01 m]</code> Run the images command.
      </li>
      <li>
        <code>[ 05 MB; 01 m]</code> Run the redirect command.
      </li>
      <li>
        <code>[ 25 MB; 15 m]</code> Run the lnki_temp command. This will generate a database called oimg_lnki which will be the main database. It also creates a table called oimg_lnki_temp which lists every [[File:]] reference
      </li>
      <li>
        <code>[ 20 MB; 05 m]</code> Run the file_regy command. This will create a table called oimg_lnki_regy which aggregates all info in oimg_lnki_temp. It also creates a table called oimg_file_regy which uses the data generated in the images and redirect commands.
      </li>
      <li>
        <code>[ 05 MB; 01 m]</code> Run the xfer_regy command. This will create a table called oimg_xfer_regy which generates a unique list of all thumbnails to download
      </li>
    </ul>
<pre>
app.bldr.cmds {
  add     ('commons.wikimedia.org', 'oimg.image');
  add     ('commons.wikimedia.org', 'oimg.redirect')  {commit_interval = 10000; progress_interval = 100; cleanup_interval = 100;}
  add     ('simple.wikipedia.org' , 'oimg.image');
  add     ('simple.wikipedia.org' , 'oimg.redirect')  {commit_interval = 10000; progress_interval = 100; cleanup_interval = 100;}
  add     ('simple.wikipedia.org' , 'oimg.lnki_temp') {commit_interval = 10000; progress_interval = 100; cleanup_interval = 100;}
  add     ('simple.wikipedia.org' , 'oimg.file_regy');
  add     ('simple.wikipedia.org' , 'oimg.xfer_regy');
}
app.bldr.run;
</pre>
  
    </div>
  </div>
</div>


<div id="mw-head" class="noprint">
  <div id="left-navigation">
    <div id="p-namespaces" class="vectorTabs">
      <h3>Namespaces</h3>
      <ul>
        <li  id="ca-nstab-main" class="selected"><span><a id="ca-nstab-main-href" href="index.html">Page</a></span></li>
      </ul>
    </div>
  </div>
</div>

<div id='mw-panel' class='noprint'>
  <div id='p-logo'>
    <a style="background-image: url(https://gnosygnu.github.io/xowa/xowa_logo.png);" href="http://xowa.org/" title="Visit the main page"></a>
  </div>
  <div class="portal" id='xowa-portal-home'>
    <h3>XOWA</h3>
    <div class="body">
      <ul>
        <li><a href="http://xowa.org/index.html" title='Visit the main page'>Main page</a></li>
        <li><a href="http://xowa.org/screenshots.html" title='See screenshots of XOWA'>Screenshots</a></li>
        <li><a href="http://xowa.org/home/wiki/Help/Download_XOWA.html" title='Download the XOWA application'>Download XOWA</a></li>
        <li><a href="http://xowa.org/home/wiki/Dashboard/Image_databases.html" title='Download offline wikis and image databases'>Download wikis</a></li>
      </ul>
    </div>
  </div>

  <div class="portal" id='xowa-portal-started'>
    <h3>Getting started</h3>
    <div class="body">
      <ul>
        <li><a href="http://xowa.org/home/wiki/App/Setup/System_requirements.html" title='Get XOWA&apos;s system requirements'>Requirements</a></li>
        <li><a href="http://xowa.org/home/wiki/App/Setup/Installation.html" title='Get instructions for installing XOWA'>Installation</a></li>
        <li><a href="http://xowa.org/home/wiki/App/Import/Simple_Wikipedia.html" title='Learn how to set up Simple Wikipedia'>Simple Wikipedia</a></li>
        <li><a href="http://xowa.org/home/wiki/App/Import/English_Wikipedia.html" title='Learn how to set up English Wikipedia'>English Wikipedia</a></li>
        <li><a href="http://xowa.org/home/wiki/App/Import/Other_wikis.html" title='Learn how to set up other Wikipedias'>Other Wikipedias</a></li>
      </ul>
    </div>
  </div>

  <div class="portal" id='xowa-portal-android'>
    <h3>Android</h3>
    <div class="body">
      <ul>
        <li><a href="http://xowa.org/home/wiki/Android/Setup.html" title='Setup XOWA on your Android device'>Setup</a></li>
      </ul>
    </div>
  </div>

  <div class="portal" id='xowa-portal-help'>
    <h3>Help</h3>
    <div class="body">
      <ul>
        <li><a href="http://xowa.org/home/wiki/Help/About.html" title='Get more information about XOWA'>About</a></li>
        <li><a href="http://xowa.org/home/wiki/Help/Contents.html" title='View a list of help topics'>Contents</a></li>
        <li><a href="http://xowa.org/home/wiki/Help/Media.html" title='Read what others have written about XOWA'>Media</a></li>
        <li><a href="http://xowa.org/home/wiki/Help/Feedback.html" title='Questions? Comments? Leave feedback for XOWA'>Feedback</a></li>
      </ul>
    </div>
  </div>
  
  <div class="portal" id='xowa-portal-blog'>
    <h3>Blog</h3>
    <div class="body">
      <ul>
        <li><a href="http://xowa.org/home/wiki/Blog.html" title='Follow XOWA''s development process'>Current</a></li>
      </ul>
    </div>
  </div>

  <div class="portal" id='xowa-portal-links'>
    <h3>Links</h3>
    <div class="body">
      <ul>
        <li><a href="http://dumps.wikimedia.org/backup-index.html" title="Get wiki datababase dumps directly from Wikimedia">Wikimedia dumps</a></li>
        <li><a href="https://archive.org/search.php?query=xowa" title="Search archive.org for XOWA files">XOWA @ archive.org</a></li>
        <li><a href="http://en.wikipedia.org" title="Visit Wikipedia (and compare to XOWA!)">English Wikipedia</a></li>
      </ul>
    </div>
  </div>

  <div class="portal" id='xowa-portal-donate'>
    <h3>Donate</h3>
    <div class="body">
      <ul>
        <li><a href="https://archive.org/donate/index.php" title="Support archive.org!">archive.org</a></li><!-- listed first due to recent fire damages: http://blog.archive.org/2013/11/06/scanning-center-fire-please-help-rebuild/ -->
        <li><a href="https://donate.wikimedia.org/wiki/Special:FundraiserRedirector" title="Support Wikipedia!">Wikipedia</a></li>
        <!-- <li><a href="" title="Support XOWA! (but only after you've supported archive.org and Wikipedia)">XOWA</a></li> -->
      </ul>
    </div>
  </div>
</div>
</body>
</html>